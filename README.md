# 🏔️ 進階 GPX 登山管理工具 (專業功能版) 使用手冊

本工具是一個純網頁端的 GPX 軌跡編輯與分析軟體，專為登山愛好者設計。無需安裝任何軟體，直接透過瀏覽器即可使用。

## 🚀 快速開始

1.  **開啟工具**：直接雙擊 `index.html` 檔案，或將其拖曳至瀏覽器 (Chrome, Edge 等) 中開啟。
2.  **載入軌跡**：
    *   點擊上方工具列左側的 **「選擇檔案」** 按鈕。
    *   選擇您電腦中的 `.gpx` 檔案 (支援多選)。
    *   載入後，地圖上即會顯示軌跡路線。

---

## 🛠️ 主要功能操作詳解

### 1. 地圖檢視與操作
*   **縮放地圖**：
    *   使用滑鼠滾輪，或點擊右上角的 `+` / `-` 按鈕進行縮放 (支援 0.25 微調)。
    *   按住滑鼠左鍵拖曳移動地圖。
*   **切換底圖**：
    *   將滑鼠游標移至右上角的 **圖層圖示** (疊在紙張的圖案)。
    *   可選擇不同的底圖來源：
        *   **OpenStreetMap (標準)**：適合一般道路檢視。
        *   **Esri 世界地形圖**：具備陰影與等高線感的地形圖。
        *   **等高地形 (OpenTopo)**：詳細的等高線地圖。
        *   **衛星影像**：真實衛星空照圖。
    *   **疊加層**：可勾選「登山路徑 (Waymarked)」來顯示官方或大眾已知的登山路線。

### 2. 資料分析圖表 (底部面板)
載入軌跡後，螢幕下方會自動顯示高度圖表。
*   **切換數據模式**：點擊圖表左上角的按鈕切換顯示資訊：
    *   `⛰️ 高度`：顯示海拔變化。
    *   `📐 坡度`：顯示路段的坡度百分比 (紅/橘色代表陡坡)。
    *   `🚀 速度`：顯示行進速度分析。
*   **互動查詢**：滑鼠在圖表上移動，地圖上會同步顯示對應的**紅色圓點**位置，方便對照地形。
*   **收合圖表**：點及圖表上方的灰色橫條 (`▼ 收合高度圖`) 可將圖表縮小，增加地圖視野。

### 3. 軌跡編輯功能 (裁切與刪除)
這是本工具最強大的功能之一，可用於修整軌跡 (例如去除開車這段的紀錄)。
1.  **選取範圍**：
    *   在下方的 **高度圖表** 上，按住滑鼠左鍵並**左右拖曳**。
    *   圖表上會出現灰色選取區塊，地圖上會同步用**亮黃色**標示出該路段。
2.  **執行編輯**：選取範圍後，圖表上方會出現操作按鈕：
    *   `✂️ 保留選取 (裁切)`：**只保留**黃色選取的部分，刪除其餘前後段。
    *   `🗑️ 刪除選取`：**刪除**黃色選取的部分，保留其餘前後段 (會自動連接斷點)。
    *   `❌ 取消`：取消目前的選取範圍。
3.  **反轉軌跡**：
    *   在左側「路線清單」中，點擊該軌跡名稱旁邊的 `⇄` 按鈕，即可將起點與終點對調。

### 4. 標記與照片管理
*   **新增地標 (Waypoint)**：
    1.  點擊工具列上的 `📍 新增地標` 按鈕。
    2.  游標會變成十字形，在地圖上任意位置點擊。
    3.  輸入地標名稱後按確定，地圖上即會出現標籤插旗。
*   **上傳照片**：
    1.  點擊 `📷 上傳照片` 按鈕。
    2.  選取登山時拍攝的照片 (JPG 格式)。
    3.  程式會自動讀取照片的 GPS 資訊，將其釘選在地圖上正確的拍攝位置。

### 5. 實用登山工具
*   **⏱️ 時間預估**：
    *   點擊此按鈕會開啟計算面板。
    *   系統依據目前的總里程與總爬升，透過 **Naismith** (一般腳程) 與 **Munter** (重裝腳程) 公式，估算所需的步行時間。
    *   您可以拖曳下方的滑桿來調整「速度係數 (0.5x ~ 1.5x)」以符合個人體能。
*   **🔍 搜尋地點**：在工具列輸入關鍵字 (如 "玉山") 並按 Go，可快速移動地圖至該位置。
*   **🎨 顯示坡度**：勾選此選項，地圖上的軌跡線會變成**彩色**，顏色代表坡度陡峭程度 (綠色平緩 -> 紅色極陡)。

### 6. 檢視與分享
*   **⛶ 全螢幕模式**：
    *   點擊右下角的浮動按鈕 `⛶`。
    *   介面會隱藏所有工具列與圖表，將地圖最大化至滿版 (98% 畫面佔比)。
    *   再次點擊即可退出。
*   **📸 畫面快照**：
    *   調整好想要分享的畫面角度。
    *   點擊右下角的浮動按鈕 `📸`。
    *   系統會自動下載一張高解析度的 PNG 圖片 (`GPX_Snapshot_...png`)，完整保留目前的視角與疊加資訊，適合分享至社群媒體。

### 7. 匯出成果
*   完成所有編輯與標記後，點擊工具列上的 `💾 匯出 GPX`。
*   您可以選擇要匯出的軌跡段落 (如果有未儲存的編輯) 以及是否包含標記點。
*   下載後的檔案可直接匯入手機 APP (如 Gaia GPS, 健行筆記, 綠野遊蹤 等) 使用。

---

## 常見問題 (FAQ)

*   **Q: 為什麼照片無法定位？**
    *   A: 請確認您的相機或手機在拍照時有開啟 GPS 定位功能，且照片檔案含有 EXIF 座標資訊。
*   **Q: 為什麼快照按鈕沒反應？**
    *   A: 請確認瀏覽器沒有阻擋彈出式視窗。快照功能使用瀏覽器內建繪圖引擎，視電腦效能可能需要等待 1-2 秒。

---
### 8. 🛰️ 即時導航系統 (Real-time Navigation)
這是 v1.3 新增的功能，讓您在登山時能確保自己走在正確的路上。
*   **啟動導航**：點擊工具列上的 `🛰️ 開始導航` 按鈕。瀏覽器會詢問位置權限，請點選「允許」。
*   **介面解說**：
    *   **目前位置**：地圖上會出現一個**藍色脈衝圓點**，外圈淺藍色圓圈代表 GPS 誤差範圍。
    *   **行走軌跡**：您移動的路徑會即時繪製成一條**藍色虛線**。您可以將此虛線與您載入的 GPX 規劃路線 (實線) 進行比對，若兩者偏離過遠，即代表可能走錯路了。
    *   **即時資訊**：按鈕旁會顯示目前的 **GPS 精確度 (±公尺)** 與 **海拔高度**。
*   **定位我**：當您移動地圖查看其他區域後，點擊 `◎ 定位我` 按鈕，視角會立刻跳回您目前的位置。

### 9. 💾 離線地圖支援 (Offline Maps)
這是 v1.3.1 新增的功能，即使在山上沒有網路，也能查看地圖。
*   **原理**：利用「地圖預載器 (Map Preloader)」功能，預先將地圖圖片下載並儲存至瀏覽器的快取記憶體 (Cache) 中。
*   **操作步驟**：
    1.  **在有網路的地方 (如家裡)**，將地圖移動到您要去登山的區域。
    2.  點擊工具列上的 `💾 離線地圖`。
    3.  在彈出的視窗中，確認預估的圖磚數量 (若顯示紅色代表數量過多，建議縮小範圍)。
    4.  點擊 `🚀 開始快取`，等待進度條跑完即可。
*   **驗證方式**：建議出發前，先將電腦/手機網路關閉，重新整理網頁。若地圖依然能清晰顯示，代表快取成功。
*   **⚠️ 注意事項**：
    *   此功能依賴瀏覽器快取，**請勿清除瀏覽器歷史紀錄/快取**，否則地圖會消失。
    *   受限於瀏覽器空間，建議只下載重點區域。

---
*版本：v1.3.1 (2026/01/29 更新)*
